import{a as A,b as w}from"./VKKp4dd0.js";import{d as C,X as S,u as O,r as o,j as h,o as V,v as l,z as k,x as s,L as a,y as u,B as m,P as x,M as N,C as P,D as B,t as d,_ as L}from"./CLJipD7y.js";const T=window.setInterval,i=r=>(P("data-v-53ff7490"),r=r(),B(),r),b={class:"payment-page"},j=i(()=>s("h1",null,"Resultado de la Transacción",-1)),z={key:0,class:"loading"},H=i(()=>s("p",null,"Cargando...",-1)),M=[H],U={key:1,class:"error-message"},$={key:2,class:"transaction-details"},q=i(()=>s("strong",null,"ID de la Transacción:",-1)),F=i(()=>s("strong",null,"Estado:",-1)),X={class:"redirect-message"},Z=C({__name:"payment",setup(r){const E=S(),D=O(),f=o(""),e=o(""),_=o(!0),c=o(""),{publicTransactionEndpoint:R}=A(),p=o(5),g=h(()=>({"status-approved":e.value==="APPROVED","status-declined":e.value==="DECLINED","status-voided":e.value==="VOIDED","status-error":e.value==="ERROR"})),I=h(()=>{switch(e.value){case"APPROVED":return"APROBADA";case"DECLINED":return"RECHAZADA";case"VOIDED":return"ANULADA";case"ERROR":return"ERROR";default:return e.value}}),y=async n=>{try{const t=await fetch(`${R}/${n}`);if(!t.ok)throw new Error("Error al obtener el estado de la transacción");const v=await t.json();e.value=v.data.status}catch(t){c.value=t.message}finally{_.value=!1;const t=T(()=>{p.value>0?p.value-=1:(clearInterval(t),D.push("/"))},1e3)}};return V(()=>{const n=E.query.id;n?(f.value=n,y(n)):(_.value=!1,c.value="ID de transacción no proporcionado en la URL")}),(n,t)=>{const v=w;return d(),l(N,null,[k(v),s("div",b,[j,a(_)?(d(),l("div",z,M)):a(c)?(d(),l("div",U,[s("p",null,u(a(c)),1)])):(d(),l("div",$,[s("p",null,[q,m(" "+u(a(f)),1)]),s("p",null,[F,m(),s("span",{class:x(a(g))},u(a(I)),3)]),s("p",X," Serás redirigido en "+u(a(p))+" segundos... ",1)]))])],64)}}}),K=L(Z,[["__scopeId","data-v-53ff7490"]]);export{K as default};
