import{_ as A}from"./B8KobyMD.js";import{d as w,X as C,u as S,r as o,j as m,o as O,v as l,z as V,x as s,M as a,y as u,B as h,P as k,L as x,C as N,D as P,t as d,_ as B}from"./BP1xxxox.js";import{u as L}from"./CR9f7x7-.js";const T=window.setInterval,i=r=>(N("data-v-53ff7490"),r=r(),P(),r),b={class:"payment-page"},j=i(()=>s("h1",null,"Resultado de la Transacción",-1)),z={key:0,class:"loading"},H=i(()=>s("p",null,"Cargando...",-1)),M=[H],U={key:1,class:"error-message"},$={key:2,class:"transaction-details"},q=i(()=>s("strong",null,"ID de la Transacción:",-1)),F=i(()=>s("strong",null,"Estado:",-1)),X={class:"redirect-message"},Z=w({__name:"payment",setup(r){const E=C(),D=S(),f=o(""),e=o(""),_=o(!0),c=o(""),{publicTransactionEndpoint:R}=L(),p=o(5),g=m(()=>({"status-approved":e.value==="APPROVED","status-declined":e.value==="DECLINED","status-voided":e.value==="VOIDED","status-error":e.value==="ERROR"})),I=m(()=>{switch(e.value){case"APPROVED":return"APROBADA";case"DECLINED":return"RECHAZADA";case"VOIDED":return"ANULADA";case"ERROR":return"ERROR";default:return e.value}}),y=async n=>{try{const t=await fetch(`${R}/${n}`);if(!t.ok)throw new Error("Error al obtener el estado de la transacción");const v=await t.json();e.value=v.data.status}catch(t){c.value=t.message}finally{_.value=!1;const t=T(()=>{p.value>0?p.value-=1:(clearInterval(t),D.push("/"))},1e3)}};return O(()=>{const n=E.query.id;n?(f.value=n,y(n)):(_.value=!1,c.value="ID de transacción no proporcionado en la URL")}),(n,t)=>{const v=A;return d(),l(x,null,[V(v),s("div",b,[j,a(_)?(d(),l("div",z,M)):a(c)?(d(),l("div",U,[s("p",null,u(a(c)),1)])):(d(),l("div",$,[s("p",null,[q,h(" "+u(a(f)),1)]),s("p",null,[F,h(),s("span",{class:k(a(g))},u(a(I)),3)]),s("p",X," Serás redirigido en "+u(a(p))+" segundos... ",1)]))])],64)}}}),Q=B(Z,[["__scopeId","data-v-53ff7490"]]);export{Q as default};
